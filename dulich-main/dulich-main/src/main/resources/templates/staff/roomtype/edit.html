<!DOCTYPE html>
<html
  lang="vi"
  xmlns:th="http://www.thymeleaf.org"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  th:replace="~{staff/layouts/main :: html(~{::content},~{::script})}"
>
  <head>
    <title>Chỉnh sửa loại phòng</title>
  </head>

  <body>
    <div th:fragment="content">
      <section class="content-header">
        <div class="container-fluid">
          <div class="row mb-2">
            <div class="col-sm-6">
              <ol class="breadcrumb float-sm-left">
                <li class="breadcrumb-item">
                  <a th:href="@{/staff/dashboard}"
                    ><i class="nav-icon fas fa fa-home"></i> Trang chủ</a
                  >
                </li>
                <li class="breadcrumb-item">
                  <a th:href="@{/staff/room-types}">Loại phòng</a>
                </li>
                <li class="breadcrumb-item active">Chỉnh sửa</li>
              </ol>
            </div>
          </div>
        </div>
      </section>

      <section class="content">
        <div class="container-fluid">
          <div class="row">
            <div class="col-12">
              <div class="card card-primary">
                <div class="card-header">
                  <h3 class="card-title">Chỉnh sửa loại phòng</h3>
                </div>
                <!-- /.card-header -->
                <!-- form start -->
                <form
                  th:action="@{/staff/room-types/edit/{id}(id=${roomType.id})}"
                  th:object="${roomType}"
                  method="post"
                  enctype="multipart/form-data"
                >
                  <div class="card-body">
                    <div
                      th:if="${errorMessage}"
                      class="alert alert-danger"
                      role="alert"
                    >
                      <strong>Lỗi!</strong>
                      <span th:text="${errorMessage}"></span>
                    </div>

                    <div class="form-group">
                      <label for="name"
                        >Tên loại phòng<span class="text-danger">*</span></label
                      >
                      <input
                        type="text"
                        class="form-control"
                        id="name"
                        placeholder="Nhập tên loại phòng"
                        th:field="*{name}"
                        required
                      />
                      <span
                        class="text-danger"
                        th:if="${#fields.hasErrors('name')}"
                        th:errors="*{name}"
                      ></span>
                    </div>

                    <div class="form-group">
                      <label for="description">Mô tả</label>
                      <textarea
                        class="form-control"
                        id="description"
                        rows="3"
                        placeholder="Nhập mô tả loại phòng"
                        th:field="*{description}"
                      ></textarea>
                      <span
                        class="text-danger"
                        th:if="${#fields.hasErrors('description')}"
                        th:errors="*{description}"
                      ></span>
                    </div>

                    <div class="form-group">
                      <label for="basePrice">Giá cơ bản</label>
                      <input
                        type="number"
                        step="0.01"
                        class="form-control"
                        id="basePrice"
                        placeholder="Nhập giá cơ bản"
                        th:field="*{basePrice}"
                      />
                      <span
                        class="text-danger"
                        th:if="${#fields.hasErrors('basePrice')}"
                        th:errors="*{basePrice}"
                      ></span>
                    </div>

                    <div class="form-group">
                      <label for="maxCapacity">Sức chứa tối đa</label>
                      <input
                        type="number"
                        class="form-control"
                        id="maxCapacity"
                        placeholder="Nhập sức chứa tối đa"
                        th:field="*{maxCapacity}"
                      />
                      <span
                        class="text-danger"
                        th:if="${#fields.hasErrors('maxCapacity')}"
                        th:errors="*{maxCapacity}"
                      ></span>
                    </div>

                    <div class="form-group">
                      <label for="bedType">Loại giường</label>
                      <select
                        class="form-control"
                        id="bedType"
                        th:field="*{bedType}"
                      >
                        <option value="">Chọn loại giường</option>
                        <option value="Single">Đơn</option>
                        <option value="Double">Đôi</option>
                        <option value="Queen">Queen</option>
                        <option value="King">King</option>
                      </select>
                      <span
                        class="text-danger"
                        th:if="${#fields.hasErrors('bedType')}"
                        th:errors="*{bedType}"
                      ></span>
                    </div>

                    <div class="form-group">
                      <label for="roomSize">Diện tích phòng (m²)</label>
                      <input
                        type="number"
                        step="0.01"
                        class="form-control"
                        id="roomSize"
                        placeholder="Nhập diện tích phòng"
                        th:field="*{roomSize}"
                      />
                      <span
                        class="text-danger"
                        th:if="${#fields.hasErrors('roomSize')}"
                        th:errors="*{roomSize}"
                      ></span>
                    </div>

                    <div class="form-group">
                      <label for="amenities"
                        >Tiện nghi (phân cách bằng dấu phẩy)</label
                      >
                      <textarea
                        class="form-control"
                        id="amenities"
                        rows="2"
                        placeholder="Nhập tiện nghi, phân cách bằng dấu phẩy"
                        th:field="*{amenities}"
                      ></textarea>
                      <span
                        class="text-danger"
                        th:if="${#fields.hasErrors('amenities')}"
                        th:errors="*{amenities}"
                      ></span>
                    </div>

                    <!-- Hiển thị ảnh hiện tại -->
                    <div
                      class="form-group"
                      th:if="${roomType.images != null && !roomType.images.isEmpty()}"
                    >
                      <label>Ảnh hiện tại</label>
                      <div class="row mb-3">
                        <div
                          class="col-md-3 mb-2"
                          th:each="image : ${#strings.listSplit(roomType.images, ',')}"
                        >
                          <img
                            th:src="${#strings.trim(image)}"
                            class="img-thumbnail"
                            style="
                              height: 150px;
                              width: 100%;
                              object-fit: cover;
                            "
                          />
                        </div>
                      </div>
                      
                    </div>

                    <div class="form-group">
                      <label for="imageFiles">Tải lên ảnh mới</label>
                      <input
                        type="file"
                        class="form-control-file"
                        id="image_roomtype"
                        name="image_roomtype"
                        multiple
                        accept="image/*"
                      />
                      <small class="form-text text-muted"
                        >Có thể chọn nhiều ảnh. Kích thước tối đa:
                        5MB/ảnh.</small
                      >
                    </div>

                    <div class="form-group">
                      <label for="status">Trạng thái</label>
                      <select
                        class="form-control"
                        id="status"
                        th:field="*{status}"
                      >
                        <option value="1">Hoạt động</option>
                        <option value="0">Không hoạt động</option>
                      </select>
                      <span
                        class="text-danger"
                        th:if="${#fields.hasErrors('status')}"
                        th:errors="*{status}"
                      ></span>
                    </div>
                  </div>
                  <!-- /.card-body -->

                  <div class="card-footer">
                    <button type="submit" class="btn btn-primary">Lưu</button>
                    <a th:href="@{/staff/room-types}" class="btn btn-secondary"
                      >Hủy</a
                    >
                  </div>
                </form>
              </div>
              <!-- /.card -->
            </div>
          </div>
        </div>
      </section>
    </div>

    <th:block th:fragment="script">
      <script>
        $(function () {
          // Thêm xử lý validate form nếu cần
          $("#description").summernote({
            height: 150,
            toolbar: [
              ["style", ["style"]],
              ["font", ["bold", "italic", "underline", "clear"]],
              ["para", ["ul", "ol", "paragraph"]],
              ["height", ["height"]],
            ],
          });
        });
      </script>
    </th:block>
  </body>
</html>
